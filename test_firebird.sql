-- Gerado por fbddl2pg_plus.py
-- Origem: metadata_erpnutri
-- Estrat√©gia COMPUTED: generated

/******************************************************************************/
/****        Generated by IBExpert 2015.12.21.1 07/10/2025 15:09:46        ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1252;

SET CLIENTLIB 'C:\Program Files (x86)\HK-Software\IBExpert\fbclient.dll';

CREATE DATABASE '192.168.5.132:nutri_mangaidf_id'
USER 'SYSDBA' PASSWORD 'mtsis'
PAGE_SIZE 16384
DEFAULT COLLATION WIN1252;

/******************************************************************************/
/****                               Domains                                ****/
/******************************************************************************/

CREATE DOMAIN DM_BLOB_ARQ AS
BYTEA ;

CREATE DOMAIN DM_BLOB_TXT AS
TEXT ;

CREATE DOMAIN DM_CEP AS
VARCHAR(8);

CREATE DOMAIN DM_CNPJ AS
VARCHAR(14);

CREATE DOMAIN DM_CPF AS
VARCHAR(11);

CREATE DOMAIN DM_DTHORA AS
TIMESTAMP;

CREATE DOMAIN DM_INSC_ESTADUAL AS
VARCHAR(15);

CREATE DOMAIN DM_LOGIN AS
VARCHAR(20);

CREATE DOMAIN DM_MOEDA AS
NUMERIC(13,2);

CREATE DOMAIN DM_OPERACAO AS
CHAR(1);

CREATE DOMAIN DM_QTD_2DEC AS
NUMERIC(13,2);

CREATE DOMAIN DM_QTD_3DEC AS
NUMERIC(13,3);

CREATE DOMAIN DM_SENHA AS
VARCHAR(20);

CREATE DOMAIN DM_STATUS AS
SMALLINT;

CREATE DOMAIN DM_STR_10 AS
VARCHAR(10);

CREATE DOMAIN DM_STR_100N AS
VARCHAR(100);

CREATE DOMAIN DM_STR_15 AS
VARCHAR(15);

CREATE DOMAIN DM_STR_20 AS
VARCHAR(20);

CREATE DOMAIN DM_STR_25 AS
VARCHAR(25);

CREATE DOMAIN DM_STR_255 AS
VARCHAR(255);

CREATE DOMAIN DM_STR_30 AS
VARCHAR(30);

CREATE DOMAIN DM_STR_31 AS
VARCHAR(31);

CREATE DOMAIN DM_STR_40 AS
VARCHAR(40);

CREATE DOMAIN DM_STR_50 AS
VARCHAR(50);

CREATE DOMAIN DM_STR_80 AS
VARCHAR(80);

CREATE DOMAIN DM_TAG AS
INTEGER;

CREATE DOMAIN DM_TEL AS
VARCHAR(10);

CREATE DOMAIN DM_TEL_COD AS
VARCHAR(2);

CREATE DOMAIN DM_TIPO AS
INTEGER;

CREATE DOMAIN DM_TIPO_SMI AS
SMALLINT;

CREATE DOMAIN DM_UF AS
VARCHAR(2);

/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/

CREATE TABLE AQEMPRESA (
    ID_AQEMPRESA   INTEGER NOT NULL,
    ID_AQSEGMENTO  INTEGER NOT NULL,
    STATUS         SMALLINT
);

CREATE TABLE AQFACETA (
    ID_AQFACETA    INTEGER NOT NULL,
    ID_AQPESSOA    INTEGER NOT NULL,
    DISCRIMINADOR  CHAR(1),
    EXCLUIDO       SMALLINT NOT NULL
);

CREATE TABLE AQPESSOA (
    ID_AQPESSOA  INTEGER NOT NULL,
    NOME         DM_STR_50
);

CREATE TABLE AQSEGMENTO (
    ID_AQSEGMENTO  INTEGER NOT NULL,
    DESCRICAO      VARCHAR(50)
);

CREATE TABLE AQUSUARIO (
    ID_AQUSUARIO  INTEGER NOT NULL,
    LOGIN         DM_STR_50,
    SENHA         VARCHAR(256),
    ASSINATURA    VARCHAR(256),
    STATUS        SMALLINT
);

CREATE TABLE DISPLAYS (
    ID    INTEGER NOT NULL,
    NOME  DM_STR_50
);

CREATE TABLE PEDIDOS (
    ID                 INTEGER NOT NULL,
    ID_PRODUTO         INTEGER,
    PEDIDO_CLIENTE     INTEGER,
    HORA_PEDIDO        TIMESTAMP,
    HORA_REPOSICAO     TIMESTAMP,
    HORA_CANCELAMENTO  TIMESTAMP
);

CREATE TABLE PRDEPARTAMENTO (
    ID_DEPARTAMENTO   INTEGER NOT NULL,
    CODDEPARTAMENTO   INTEGER,
    DESCRICAO         DM_STR_50,
    STATUS            SMALLINT,
    OBS               DM_BLOB_TXT,
    ID_DEPCFG_PADRAO  INTEGER,
    EXCLUIDO          SMALLINT NOT NULL,
    DATA_ALTERACAO    TIMESTAMP
);

CREATE TABLE PRDEPCFG (
    ID_DEPCFG        INTEGER NOT NULL,
    IP_CLIENTE       DM_STR_20,
    BALANCA_PORTA    DM_STR_20,
    ID_DEPARTAMENTO  INTEGER,
    RESOLUCAO        SMALLINT,
    EXCLUIDO         SMALLINT NOT NULL,
    DATA_ALTERACAO   TIMESTAMP
);

CREATE TABLE PRDEPOPERACAO (
    ID_DEPOPERACAO   INTEGER NOT NULL,
    ID_OPERACAO      INTEGER,
    ID_DEPARTAMENTO  INTEGER,
    POSTELA          SMALLINT,
    EXCLUIDO         SMALLINT NOT NULL,
    DATA_ALTERACAO   TIMESTAMP
);

CREATE TABLE PRDEPPANELA (
    ID_DEPPANELA     INTEGER NOT NULL,
    ID_DEPARTAMENTO  INTEGER,
    ID_PANELA        INTEGER,
    POSTELA          SMALLINT,
    STATUS           SMALLINT,
    OBS              DM_BLOB_TXT,
    EXCLUIDO         SMALLINT NOT NULL,
    DATA_ALTERACAO   TIMESTAMP
);

CREATE TABLE PRDEPPESO (
    ID_DEPPESO           INTEGER NOT NULL,
    INFOPESOTOTAL        DM_QTD_3DEC,
    INFOTARA             DM_QTD_3DEC,
    INFOESTORNO          TIMESTAMP,
    ID_USUARIO           INTEGER,
    INFOPESAGEM          TIMESTAMP,
    ID_USUARIOESTORNO    INTEGER,
    ID_DEPPROD           INTEGER,
    ID_DEPPANELA         INTEGER,
    INFOPESAGEM_INT      INTEGER,
    OBS                  DM_BLOB_TXT,
    INFOESTORNO_INT      SMALLINT,
    ID_DEPOPERACAO       INTEGER,
    CODPROD              INTEGER,
    PRODUTODESC          DM_STR_50,
    CODPANELA            INTEGER,
    PANELADESC           DM_STR_30,
    INFOPESAGEMHORA_INT  INTEGER,
    EXCLUIDO             SMALLINT NOT NULL,
    DATA_ALTERACAO       TIMESTAMP
);

CREATE TABLE PRDEPPROD (
    ID_DEPPROD       INTEGER NOT NULL,
    ID_PRODUTO       INTEGER,
    GIROSTATUS       SMALLINT,
    STATUS           SMALLINT,
    GIROPOS          INTEGER,
    OBS              DM_BLOB_TXT,
    ID_DEPARTAMENTO  INTEGER,
    POSTELA          SMALLINT,
    EXCLUIDO         SMALLINT NOT NULL,
    DATA_ALTERACAO   TIMESTAMP
);

CREATE TABLE PRGRPPRODUTO (
    ID_GRPPRODUTO   INTEGER NOT NULL,
    CODGRUPO        INTEGER,
    DESCRICAO       DM_STR_50,
    EXCLUIDO        SMALLINT NOT NULL,
    DATA_ALTERACAO  TIMESTAMP
);

CREATE TABLE PRODUTODISPLAY (
    ID_PRODUTO  INTEGER,
    ID_DISPLAY  INTEGER
);

CREATE TABLE PROPERACAO (
    ID_OPERACAO      INTEGER NOT NULL,
    CODOPERACAO      INTEGER,
    DESCRICAO        DM_STR_30,
    OBS              DM_BLOB_TXT,
    STATUS           SMALLINT,
    CORAPRESENTACAO  DM_STR_20,
    CORFONTE         DM_STR_20,
    EXCLUIDO         SMALLINT NOT NULL,
    DATA_ALTERACAO   TIMESTAMP,
    ETAPA_REPOSICAO  SMALLINT
);

CREATE TABLE PROPERACAO_CALC (
    ID_OPERACAO_CALC  INTEGER NOT NULL,
    ID_DEPARTAMENTO   INTEGER NOT NULL,
    DESCRICAO         DM_STR_100N NOT NULL,
    EXCLUIDO          SMALLINT NOT NULL,
    DATA_ALTERACAO    TIMESTAMP
);

CREATE TABLE PROPERACAO_CALC_DEPOP_GRUPO1 (
    ID_OPERACAO_CALC_DEPOP_GRUPO1  INTEGER NOT NULL,
    ID_OPERACAO_CALC               INTEGER NOT NULL,
    ID_DEPOPERACAO                 INTEGER NOT NULL
);

CREATE TABLE PROPERACAO_CALC_DEPOP_GRUPO2 (
    ID_OPERACAO_CALC_DEPOP_GRUPO2  INTEGER NOT NULL,
    ID_OPERACAO_CALC               INTEGER NOT NULL,
    ID_DEPOPERACAO                 INTEGER NOT NULL
);

CREATE TABLE PRPANELA (
    ID_PANELA       INTEGER NOT NULL,
    CODPANELA       INTEGER,
    DESCRICAO       DM_STR_30,
    TARA            DM_QTD_3DEC,
    OBS             DM_BLOB_TXT,
    EXCLUIDO        SMALLINT NOT NULL,
    DATA_ALTERACAO  TIMESTAMP
);

CREATE TABLE PRPRODUTO (
    ID_PRODUTO      INTEGER NOT NULL,
    DESCRICAO       DM_STR_50,
    OBS             DM_BLOB_TXT,
    CODPROD         INTEGER,
    ID_GRPPRODUTO   INTEGER,
    EXCLUIDO        SMALLINT NOT NULL,
    DATA_ALTERACAO  TIMESTAMP
);

CREATE TABLE SSGRUPO (
    ID_SSGRUPO  INTEGER NOT NULL,
    DESCRICAO   DM_STR_50 NOT NULL,
    STATUS      SMALLINT NOT NULL
);

CREATE TABLE SSGRUPO_PERMISSAO (
    ID_SSGRUPO_PERMISSAO  INTEGER NOT NULL,
    ID_SSGRUPO            INTEGER NOT NULL,
    ID_SSPERMISSAO        INTEGER NOT NULL
);

CREATE TABLE SSPERMISSAO (
    ID_SSPERMISSAO    INTEGER NOT NULL,
    DESCRICAO         DM_STR_50 NOT NULL,
    STATUS            SMALLINT NOT NULL,
    EXIGE_ASSINATURA  SMALLINT NOT NULL,
    OBS               DM_BLOB_TXT
);

CREATE TABLE SSUSUARIO_EMPRESA_GRUPO (
    ID_SSUSUARIO_EMPRESA_GRUPO  INTEGER NOT NULL,
    ID_AQUSUARIO                INTEGER NOT NULL,
    ID_AQEMPRESA                INTEGER NOT NULL,
    ID_SSGRUPO                  INTEGER NOT NULL
);

/******************************************************************************/
/****                             Primary keys                             ****/
/******************************************************************************/

ALTER TABLE AQEMPRESA ADD PRIMARY KEY (ID_AQEMPRESA);
ALTER TABLE AQFACETA ADD PRIMARY KEY (ID_AQFACETA);
ALTER TABLE AQPESSOA ADD PRIMARY KEY (ID_AQPESSOA);
ALTER TABLE AQSEGMENTO ADD PRIMARY KEY (ID_AQSEGMENTO);
ALTER TABLE AQUSUARIO ADD PRIMARY KEY (ID_AQUSUARIO);
ALTER TABLE PRDEPARTAMENTO ADD PRIMARY KEY (ID_DEPARTAMENTO);
ALTER TABLE PRDEPCFG ADD PRIMARY KEY (ID_DEPCFG);
ALTER TABLE PRDEPOPERACAO ADD PRIMARY KEY (ID_DEPOPERACAO);
ALTER TABLE PRDEPPANELA ADD PRIMARY KEY (ID_DEPPANELA);
ALTER TABLE PRDEPPESO ADD PRIMARY KEY (ID_DEPPESO);
ALTER TABLE PRDEPPROD ADD PRIMARY KEY (ID_DEPPROD);
ALTER TABLE PRGRPPRODUTO ADD PRIMARY KEY (ID_GRPPRODUTO);
ALTER TABLE PROPERACAO ADD PRIMARY KEY (ID_OPERACAO);
ALTER TABLE PROPERACAO_CALC ADD PRIMARY KEY (ID_OPERACAO_CALC);
ALTER TABLE PROPERACAO_CALC_DEPOP_GRUPO1 ADD PRIMARY KEY (ID_OPERACAO_CALC_DEPOP_GRUPO1);
ALTER TABLE PROPERACAO_CALC_DEPOP_GRUPO2 ADD PRIMARY KEY (ID_OPERACAO_CALC_DEPOP_GRUPO2);
ALTER TABLE PRPANELA ADD PRIMARY KEY (ID_PANELA);
ALTER TABLE PRPRODUTO ADD PRIMARY KEY (ID_PRODUTO);
ALTER TABLE SSGRUPO ADD PRIMARY KEY (ID_SSGRUPO);
ALTER TABLE SSGRUPO_PERMISSAO ADD PRIMARY KEY (ID_SSGRUPO_PERMISSAO);
ALTER TABLE SSPERMISSAO ADD PRIMARY KEY (ID_SSPERMISSAO);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD PRIMARY KEY (ID_SSUSUARIO_EMPRESA_GRUPO);

/******************************************************************************/
/****                             Foreign keys                             ****/
/******************************************************************************/

ALTER TABLE AQEMPRESA ADD FOREIGN KEY (ID_AQSEGMENTO) REFERENCES AQSEGMENTO (ID_AQSEGMENTO);
ALTER TABLE AQEMPRESA ADD FOREIGN KEY (ID_AQEMPRESA) REFERENCES AQFACETA (ID_AQFACETA);
ALTER TABLE AQEMPRESA ADD FOREIGN KEY (ID_AQSEGMENTO) REFERENCES AQSEGMENTO (ID_AQSEGMENTO);
ALTER TABLE AQEMPRESA ADD FOREIGN KEY (ID_AQEMPRESA) REFERENCES AQFACETA (ID_AQFACETA);
ALTER TABLE AQUSUARIO ADD FOREIGN KEY (ID_AQUSUARIO) REFERENCES AQFACETA (ID_AQFACETA);
ALTER TABLE AQUSUARIO ADD FOREIGN KEY (ID_AQUSUARIO) REFERENCES AQFACETA (ID_AQFACETA);
ALTER TABLE PRDEPCFG ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPCFG ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPOPERACAO ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPOPERACAO ADD FOREIGN KEY (ID_OPERACAO) REFERENCES PROPERACAO (ID_OPERACAO);
ALTER TABLE PRDEPOPERACAO ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPOPERACAO ADD FOREIGN KEY (ID_OPERACAO) REFERENCES PROPERACAO (ID_OPERACAO);
ALTER TABLE PRDEPPANELA ADD FOREIGN KEY (ID_PANELA) REFERENCES PRPANELA (ID_PANELA);
ALTER TABLE PRDEPPANELA ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPPANELA ADD FOREIGN KEY (ID_PANELA) REFERENCES PRPANELA (ID_PANELA);
ALTER TABLE PRDEPPANELA ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPPESO ADD FOREIGN KEY (ID_DEPOPERACAO) REFERENCES PRDEPOPERACAO (ID_DEPOPERACAO);
ALTER TABLE PRDEPPESO ADD FOREIGN KEY (ID_DEPPANELA) REFERENCES PRDEPPANELA (ID_DEPPANELA);
ALTER TABLE PRDEPPESO ADD FOREIGN KEY (ID_DEPPROD) REFERENCES PRDEPPROD (ID_DEPPROD);
ALTER TABLE PRDEPPESO ADD FOREIGN KEY (ID_DEPOPERACAO) REFERENCES PRDEPOPERACAO (ID_DEPOPERACAO);
ALTER TABLE PRDEPPESO ADD FOREIGN KEY (ID_DEPPANELA) REFERENCES PRDEPPANELA (ID_DEPPANELA);
ALTER TABLE PRDEPPESO ADD FOREIGN KEY (ID_DEPPROD) REFERENCES PRDEPPROD (ID_DEPPROD);
ALTER TABLE PRDEPPROD ADD FOREIGN KEY (ID_PRODUTO) REFERENCES PRPRODUTO (ID_PRODUTO);
ALTER TABLE PRDEPPROD ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PRDEPPROD ADD FOREIGN KEY (ID_PRODUTO) REFERENCES PRPRODUTO (ID_PRODUTO);
ALTER TABLE PRDEPPROD ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PROPERACAO_CALC ADD FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES PRDEPARTAMENTO (ID_DEPARTAMENTO);
ALTER TABLE PROPERACAO_CALC_DEPOP_GRUPO1 ADD FOREIGN KEY (ID_DEPOPERACAO) REFERENCES PRDEPOPERACAO (ID_DEPOPERACAO);
ALTER TABLE PROPERACAO_CALC_DEPOP_GRUPO1 ADD FOREIGN KEY (ID_OPERACAO_CALC) REFERENCES PROPERACAO_CALC (ID_OPERACAO_CALC);
ALTER TABLE PROPERACAO_CALC_DEPOP_GRUPO2 ADD FOREIGN KEY (ID_DEPOPERACAO) REFERENCES PRDEPOPERACAO (ID_DEPOPERACAO);
ALTER TABLE PROPERACAO_CALC_DEPOP_GRUPO2 ADD FOREIGN KEY (ID_OPERACAO_CALC) REFERENCES PROPERACAO_CALC (ID_OPERACAO_CALC);
ALTER TABLE PRPRODUTO ADD FOREIGN KEY (ID_GRPPRODUTO) REFERENCES PRGRPPRODUTO (ID_GRPPRODUTO);
ALTER TABLE PRPRODUTO ADD FOREIGN KEY (ID_GRPPRODUTO) REFERENCES PRGRPPRODUTO (ID_GRPPRODUTO);
ALTER TABLE SSGRUPO_PERMISSAO ADD FOREIGN KEY (ID_SSGRUPO) REFERENCES SSGRUPO (ID_SSGRUPO);
ALTER TABLE SSGRUPO_PERMISSAO ADD FOREIGN KEY (ID_SSPERMISSAO) REFERENCES SSPERMISSAO (ID_SSPERMISSAO);
ALTER TABLE SSGRUPO_PERMISSAO ADD FOREIGN KEY (ID_SSGRUPO) REFERENCES SSGRUPO (ID_SSGRUPO);
ALTER TABLE SSGRUPO_PERMISSAO ADD FOREIGN KEY (ID_SSPERMISSAO) REFERENCES SSPERMISSAO (ID_SSPERMISSAO);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD FOREIGN KEY (ID_AQUSUARIO) REFERENCES AQUSUARIO (ID_AQUSUARIO);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD FOREIGN KEY (ID_AQEMPRESA) REFERENCES AQEMPRESA (ID_AQEMPRESA);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD FOREIGN KEY (ID_SSGRUPO) REFERENCES SSGRUPO (ID_SSGRUPO);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD FOREIGN KEY (ID_AQUSUARIO) REFERENCES AQUSUARIO (ID_AQUSUARIO);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD FOREIGN KEY (ID_AQEMPRESA) REFERENCES AQEMPRESA (ID_AQEMPRESA);
ALTER TABLE SSUSUARIO_EMPRESA_GRUPO ADD FOREIGN KEY (ID_SSGRUPO) REFERENCES SSGRUPO (ID_SSGRUPO);

/******************************************************************************/
/****                               Indices                                ****/
/******************************************************************************/

CREATE UNIQUE INDEX XPKPRDEPARTAMENTO ON PRDEPARTAMENTO (ID_DEPARTAMENTO);
CREATE UNIQUE INDEX XPKPRDEPCFG ON PRDEPCFG (ID_DEPCFG);
CREATE UNIQUE INDEX XPKPRDEPOPERACAO ON PRDEPOPERACAO (ID_DEPOPERACAO);
CREATE UNIQUE INDEX XPKPRDEPPANELA ON PRDEPPANELA (ID_DEPPANELA);
CREATE UNIQUE INDEX XPKPRDEPPESO ON PRDEPPESO (ID_DEPPESO);
CREATE UNIQUE INDEX XPKPRDEPPROD ON PRDEPPROD (ID_DEPPROD);
CREATE UNIQUE INDEX XPKPRGRPPRODUTO ON PRGRPPRODUTO (ID_GRPPRODUTO);
CREATE UNIQUE INDEX XPKPROPERACAO ON PROPERACAO (ID_OPERACAO);
CREATE UNIQUE INDEX XPKPRPANELA ON PRPANELA (ID_PANELA);
CREATE UNIQUE INDEX XPKPRPRODUTO ON PRPRODUTO (ID_PRODUTO);
